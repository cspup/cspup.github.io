<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>blog</title>
</head>
<script src="https://cdn.bootcdn.net/ajax/libs/marked/2.1.3/marked.js"></script>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

<body>
    <div id="blog-view">

    </div>
</body>
<script>
    window.onload = () => {
        var filename = getQueryVariable("path");
        var content;
        axios.get(filename,)
        .then(function (response) {
            console.log(response);
            content = response.data;
            document.getElementById("blog-view").innerHTML = marked(content);
        })
    };

    function renderMarkDown() {
        var filename = getQueryVariable("path");
        console.log(decodeURI(filename));
        var markdown;
        var url = "http://127.0.0.1:8080/api/index/getMarkdown";
        axios.get(url, {
            params: {
                filename: decodeURI(filename)
            }
        })
            .then(function (response) {
                console.log(response);
                content = response.data;
                document.getElementById("blog-view").innerHTML = marked(content);
            })
            .catch(function (error) {
                console.log(error);
            });



    }

    function getQueryVariable(variable) {
        var query = window.location.search.substring(1);
        var vars = query.split("&");
        for (var i = 0; i < vars.length; i++) {
            var pair = vars[i].split("=");
            if (pair[0] == variable) { return pair[1]; }
        }
        return (false);
    }
</script>

</html>