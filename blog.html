<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>blog</title>
</head>
<script src="/js/marked.min.js"></script>
<script src="/js/axios.min.js"></script>
<link rel="stylesheet" href="/css/github-markdown.css" />
<style>
    .markdown-body {
		box-sizing: border-box;
		min-width: 200px;
		max-width: 980px;
		margin: 0 auto;
		padding: 45px;
	}

	@media (max-width: 767px) {
		.markdown-body {
			padding: 15px;
		}
	}
</style>
<body>
    <div id="blog-view" class="markdown-body">

    </div>
</body>
<script>
    window.onload = () => {
        var filename = getQueryVariable("path");
        var content;
        axios.get(filename,)
        .then(function (response) {
            console.log(response);
            content = response.data;
            document.getElementById("blog-view").innerHTML = marked.parse(content);
        })
    };

    function renderMarkDown() {
        var filename = getQueryVariable("path");
        console.log(decodeURI(filename));
        var markdown;
        var url = "http://127.0.0.1:8080/api/index/getMarkdown";
        axios.get(url, {
            params: {
                filename: decodeURI(filename)
            }
        })
            .then(function (response) {
                console.log(response);
                content = response.data;
                document.getElementById("blog-view").innerHTML = marked(content);
            })
            .catch(function (error) {
                console.log(error);
            });



    }

    function getQueryVariable(variable) {
        var query = window.location.search.substring(1);
        var vars = query.split("&");
        for (var i = 0; i < vars.length; i++) {
            var pair = vars[i].split("=");
            if (pair[0] == variable) { return pair[1]; }
        }
        return (false);
    }
</script>

</html>